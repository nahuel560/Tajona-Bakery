(function(t){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],t)}else{t(jQuery)}})(function(n){"use strict";var o=[],e=[],i={precision:100,elapse:false,defer:false};e.push(/^[0-9]*$/.source);e.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source);e.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source);e=new RegExp(e.join("|"));function s(t){if(t instanceof Date){return t}if(String(t).match(e)){if(String(t).match(/^[0-9]*$/)){t=Number(t)}if(String(t).match(/\-/)){t=String(t).replace(/\-/g,"/")}return new Date(t)}else{throw new Error("Couldn't cast `"+t+"` to a date object.")}}var f={Y:"years",m:"months",n:"daysToMonth",d:"daysToWeek",w:"weeks",W:"weeksToMonth",H:"hours",M:"minutes",S:"seconds",D:"totalDays",I:"totalHours",N:"totalMinutes",T:"totalSeconds"};function c(t){var e=t.toString().replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return new RegExp(e)}function a(h){return function(t){var e=t.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(e){for(var s=0,i=e.length;s<i;++s){var n=e[s].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),o=c(n[0]),a=n[1]||"",l=n[3]||"",r=null;n=n[2];if(f.hasOwnProperty(n)){r=f[n];r=Number(h[r])}if(r!==null){if(a==="!"){r=u(l,r)}if(a===""){if(r<10){r="0"+r.toString()}}t=t.replace(o,r.toString())}}}t=t.replace(/%%/,"%");return t}}function u(t,e){var s="s",i="";if(t){t=t.replace(/(:|;|\s)/gi,"").split(/\,/);if(t.length===1){s=t[0]}else{i=t[0];s=t[1]}}if(Math.abs(e)>1){return s}else{return i}}var l=function(t,e,s){this.el=t;this.$el=n(t);this.interval=null;this.offset={};this.options=n.extend({},i);this.instanceNumber=o.length;o.push(this);this.$el.data("countdown-instance",this.instanceNumber);if(s){if(typeof s==="function"){this.$el.on("update.countdown",s);this.$el.on("stoped.countdown",s);this.$el.on("finish.countdown",s)}else{this.options=n.extend({},i,s)}}this.setFinalDate(e);if(this.options.defer===false){this.start()}};n.extend(l.prototype,{start:function(){if(this.interval!==null){clearInterval(this.interval)}var t=this;this.update();this.interval=setInterval(function(){t.update.call(t)},this.options.precision)},stop:function(){clearInterval(this.interval);this.interval=null;this.dispatchEvent("stoped")},toggle:function(){if(this.interval){this.stop()}else{this.start()}},pause:function(){this.stop()},resume:function(){this.start()},remove:function(){this.stop.call(this);o[this.instanceNumber]=null;delete this.$el.data().countdownInstance},setFinalDate:function(t){this.finalDate=s(t)},update:function(){if(this.$el.closest("html").length===0){this.remove();return}var t=n._data(this.el,"events")!==undefined,e=new Date,s;s=this.finalDate.getTime()-e.getTime();s=Math.ceil(s/1e3);s=!this.options.elapse&&s<0?0:Math.abs(s);if(this.totalSecsLeft===s||!t){return}else{this.totalSecsLeft=s}this.elapsed=e>=this.finalDate;this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToWeek:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToMonth:Math.floor(this.totalSecsLeft/60/60/24%30.4368),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),weeksToMonth:Math.floor(this.totalSecsLeft/60/60/24/7)%4,months:Math.floor(this.totalSecsLeft/60/60/24/30.4368),years:Math.abs(this.finalDate.getFullYear()-e.getFullYear()),totalDays:Math.floor(this.totalSecsLeft/60/60/24),totalHours:Math.floor(this.totalSecsLeft/60/60),totalMinutes:Math.floor(this.totalSecsLeft/60),totalSeconds:this.totalSecsLeft};if(!this.options.elapse&&this.totalSecsLeft===0){this.stop();this.dispatchEvent("finish")}else{this.dispatchEvent("update")}},dispatchEvent:function(t){var e=n.Event(t+".countdown");e.finalDate=this.finalDate;e.elapsed=this.elapsed;e.offset=n.extend({},this.offset);e.strftime=a(this.offset);this.$el.trigger(e)}});n.fn.countdown=function(){var i=Array.prototype.slice.call(arguments,0);return this.each(function(){var t=n(this).data("countdown-instance");if(t!==undefined){var e=o[t],s=i[0];if(l.prototype.hasOwnProperty(s)){e[s].apply(e,i.slice(1))}else if(String(s).match(/^[$A-Z_][0-9A-Z_$]*$/i)===null){e.setFinalDate.call(e,s);e.start()}else{n.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,s))}}else{new l(this,i[0],i[1])}})}});