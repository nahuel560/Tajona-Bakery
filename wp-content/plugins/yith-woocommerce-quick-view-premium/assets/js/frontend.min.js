/**
 * frontend.min.js
 *
 * @author Your Inspiration Themes
 * @package YITH WooCommerce Quick View
 * @version 1.0.0
 */
jQuery(document).ready(function(d){"use strict";var i="",r="yith-inline"!=yith_qv.type?d(document).find(".yith-quick-view"):d(document).find(".yith-quick-view").clone(),s=r.find(".yith-quick-view-content"),_=r.find(".yith-quick-view-close"),c=r.find(".yith-quick-view-nav"),l=[],h=null,v=null,t=function(){if("yith-inline"!=yith_qv.type){var i=d(document).find(".yith-quick-view .yith-wcqv-wrapper"),t=d(window).width(),e=d(window).height(),a=t-60>yith_qv.popup_size_width?yith_qv.popup_size_width:t-60,n=e-120>yith_qv.popup_size_height?yith_qv.popup_size_height:e-120;i.css({left:t/2-a/2,top:e/2-n/2,width:a+"px",height:n+"px"})}};if("undefined"!=typeof yith_qv){d.fn.yith_wcqv_init=function(){i=d(document).find(".yith-wcqv-button"),d.each(i,function(){var i=d(this).data("product_id");-1==d.inArray(i,l)&&l.push(i)}),c.length&&a(c),n(_),t(),i.off("click"),imagesLoaded(s,function(){e(i)}),d(document).on("click",".yith-wcqv-button",function(i){var t=d(this),e=(t.data("type"),t.data("product_id"));if(e){if(i.preventDefault(),i.stopPropagation(),yith_qv.enable_loading||o(t),"yith-inline"==yith_qv.type){var a=t.parents(yith_qv.main_product),n=a.hasClass("last")?a:a.nextUntil(".first",".last");if(n.hasClass("last")||(n=d(yith_qv.main_product).last()),a.closest(".yith-quick-view").length||n.next(".yith-quick-view").length)o(s);else{if(r.hasClass("open"))return r.removeClass("open").removeClass("loading"),void r.slideUp("slow",function(){n.after(r),u(t,e)});n.after(r)}}else d(document).trigger("qv_loading");u(t,e)}})};var e=function(i){i.length&&!i.hasClass("inside-thumb")||d.each(i,function(){var i=d(this),t=i.closest(yith_qv.main_product).find(yith_qv.main_image_class);i.css({top:(t.height()-i.height())/2+"px",right:(t.width()-i.width())/2+"px",display:"inline-block"})})},o=function(i){void 0!==yith_qv.loader&&(i.block({message:null,overlayCSS:{background:"#fff url("+yith_qv.loader+") no-repeat center",opacity:.5,cursor:"none"}}),d(document).on("qv_loader_stop",function(){i.unblock()}))},a=function(i){var t=i.find("> a");t.off("click"),t.on("click",function(i){i.preventDefault();var t=d(this),e=t.data("product_id");o(s),u(t,e)})},u=function(i,t){var e=d.inArray(t,l),a=l[e-1],n=l[e+1],o={action:yith_qv.ajaxQuickView,product_id:t,prev_product_id:a,next_product_id:n,context:"frontend",lang:yith_qv.lang};null!=v&&v.abort(),v=d.ajax({url:yith_qv.ajaxurl.toString().replace("%%endpoint%%",yith_qv.ajaxQuickView),data:o,dataType:"json",type:"GET",success:function(i){s.html(i.html),"slider"==yith_qv.imagesMode&&imagesLoaded(s,function(){f()}),480<d(window).width()&&s.find("div.summary").perfectScrollbar({suppressScrollX:!0}),yith_qv.increment_plugin&&s.find("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" class="plus" />').prepend('<input type="button" value="-" class="minus" />');var t=s.find(".variations_form");t.each(function(){d(this).wc_variation_form(),void 0!==d.fn.yith_wccl?d(this).yith_wccl():void 0!==d.yith_wccl&&i.prod_attr&&d.yith_wccl(i.prod_attr)}),t.trigger("check_variations"),t.trigger("reset_image"),void 0!==d.fn.yith_ywraq_variations&&(d.fn.yith_ywraq_variations(),s.find('[name|="variation_id"]').trigger("change"));var e=s.find(".yith-wocc-wrapper");e.length&&void 0!==d.fn.yith_wocc_init&&e.yith_wocc_init(),void 0!==d.fn.prettyPhoto&&s.find("a[data-rel^='prettyPhoto']").prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1,show_title:!1}),yith_qv.ajaxcart&&m(i.product_link,s);var a=t.find(".single_variation_wrap");if(y(a),void 0!==d.fn.ajaxForm&&void 0!==d.fn.wpcf7InitForm&&(d.fn.ajaxForm({delegation:!0,target:"#output"}),s.find("div.wpcf7 > form").wpcf7InitForm()),c.length){var n=c.find(".yith-wcqv-next"),o=c.find(".yith-wcqv-prev");i.prev_product?(o.find("div").html(i.prev_product_preview),o.data("product_id",i.prev_product).css({display:"block"})):o.css({display:"none"}),i.next_product?(n.find("div").html(i.next_product_preview),n.data("product_id",i.next_product).css({display:"block"})):n.css({display:"none"})}r.hasClass("open")||(r.removeClass("loading").addClass("open"),"yith-inline"==yith_qv.type?r.slideDown("slow"):d("html").addClass("yith-quick-view-is-open")),v=null,d(document).trigger("qv_loader_stop")}})},f=function(){var i=s.find(".yith-quick-view-images-slider");i.length&&void 0!==d.fn.bxSlider&&(h=i.bxSlider({pager:!1,prevText:"",nextText:""}))};d(document).on("click",".yith-quick-view-single-thumb",function(){d(this).siblings().removeClass("active");var i=d(this).parents(".images"),t=i.find(".woocommerce-main-image"),e=i.find("img.wp-post-image"),a=d(this).data("img"),n=d(this).data("href");e.length||(t=(e=i.find("img.attachment-quick_view_image_size")).closest("a")),e.attr("src",a).attr("srcset",a).attr("src-orig",a),t.attr("href",n),d(this).addClass("active"),d(document).trigger("yith_wcqv_change_thumb")});var n=function(i){i.off("click"),i.on("click",function(i){i.preventDefault(),t()}),"yith-inline"!=yith_qv.type&&(d(document).keyup(function(i){27===i.keyCode&&t()}),d(".yith-quick-view-overlay").on("click",function(i){r.hasClass("loading")||t()}));var t=function(){r.removeClass("open").removeClass("loading"),"yith-inline"!=yith_qv.type?(d("html").removeClass("yith-quick-view-is-open"),setTimeout(function(){e()},1e3)):r.slideUp("slow",function(){e()})},e=function(){s.html(""),d(document).trigger("qv_is_closed")}};d(document).on("yith_infs_adding_elem yith-wcan-ajax-filtered",function(){d.fn.yith_wcqv_init()});var m=function(r,c){c.find("form.cart").on("submit",function(i){var t,e=d(this),n=e.find("button");if(!("is_one_click"==e.find('input[name="_yith_wocc_one_click"]').val())){i.preventDefault();var a=new FormData;d.each(e.find("input[type='file']"),function(i,e){d.each(d(e)[0].files,function(i,t){a.append(e.name,t)})});var o=!1;t=e.serializeArray(),d.each(t,function(i,t){"add-to-cart"==t.name&&(o=!0),a.append(t.name,t.value)}),a.append("wp_http_referer",r),o||a.append("add-to-cart",n.val()),void 0!==yith_qv.loader&&n.block({message:null,overlayCSS:{background:"#fff url("+yith_qv.loader+") no-repeat center",opacity:.5,cursor:"none"}}),d.ajax({url:r,data:a,contentType:!1,processData:!1,type:"POST",dataType:"html",success:function(i){if(yith_qv.redirect_checkout)window.location.href=yith_qv.checkout_url;else{var t=d(i).find("div.woocommerce-message, ul.woocommerce-error"),e=d(i).find("#header .yit_cart_widget"),a=c.find("div.summary");t.length||(t=d(i).filter("div.woocommerce-message, ul.woocommerce-error")),d("#header").find(".yit_cart_widget").replaceWith(e),a.find(".woocommerce-message, .woocommerce-error").remove(),a.prepend(t),void 0!==yith_qv.loader&&n.unblock(),a.scrollTop(0),d(document.body).trigger("wc_fragment_refresh").trigger("added_to_cart"),yith_qv.closeOnAjaxCart&&!t.filter(".woocommerce-error").length&&setTimeout(function(){_.click()},1e3)}}})}})},y=function(i){var c=[],e=function(i){var t=s.find("div.images"),e=t.find(".yith-quick-view-thumbs"),a=t.find(".attachment-quick_view_image_size").first(),n=t.find("a.woocommerce-main-image"),o=e.find('.yith-quick-view-single-thumb[data-attachment_id="'+i.attachment_id+'"]'),r=d.inArray(i.attachment_id,c);o.length?o.click():-1!==r&&null!==h?h.goToSlide(r):i.image&&i.image.src&&1<i.image.src.length&&(a.wc_set_variation_attr("src",i.image.src),a.wc_set_variation_attr("height",i.image.src_h),a.wc_set_variation_attr("width",i.image.src_w),a.wc_set_variation_attr("srcset",i.image.srcset),a.wc_set_variation_attr("sizes",i.image.sizes),a.wc_set_variation_attr("title",i.image.title),a.wc_set_variation_attr("alt",i.image.alt),a.wc_set_variation_attr("data-src",i.image.full_src),a.wc_set_variation_attr("data-large_image",i.image.full_src),a.wc_set_variation_attr("data-large_image_width",i.image.full_src_w),a.wc_set_variation_attr("data-large_image_height",i.image.full_src_h),n.wc_set_variation_attr("href",i.image.full_src),e.find(".yith-quick-view-single-thumb").removeClass("active"))},n=function(t){return!(!yith_qv.ajaxVariationGallery||"none"==yith_qv.imagesMode||!t.has_custom_gallery&&!s.find("div.images").hasClass("has_custom_gallery"))&&(null!=v&&v.abort(),v=d.ajax({url:yith_qv.ajaxurl.toString().replace("%%endpoint%%",yith_qv.ajaxVariationGallery),data:{action:yith_qv.ajaxVariationGallery,id:t?t.variation_id:d("input#yith_wcqv_product_id").val(),context:"frontend"},dataType:"json",type:"POST",beforeSend:function(){s.find("div.images").addClass("loading-gallery")},success:function(i){s.find("div.images").replaceWith(i.html),"slider"==yith_qv.imagesMode&&(c=[],f()),t&&e(t),void 0!==d.fn.prettyPhoto&&s.find("a[data-rel^='prettyPhoto']").prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1,show_title:!1}),v=null,i.default||s.find("div.images").addClass("has_custom_gallery"),d(document).trigger("qv_variation_gallery_loaded")}}),!0)};d(".yith-quick-view-images-slider").find(".yith-quick-view-slide").each(function(i,t){c[i]=d(this).data("attachment_id")+""}),i.on("show_variation",function(i,t){void 0===t.attachment_id||n(t)||e(t)}),i.on("hide_variation",function(){var i,t,e,a;n(!1)||(i=s.find("div.images"),t=i.find(".yith-quick-view-thumbs"),e=i.find(".attachment-quick_view_image_size").first(),a=i.find("a.woocommerce-main-image"),e.wc_reset_variation_attr("src"),e.wc_reset_variation_attr("width"),e.wc_reset_variation_attr("height"),e.wc_reset_variation_attr("srcset"),e.wc_reset_variation_attr("sizes"),e.wc_reset_variation_attr("title"),e.wc_reset_variation_attr("alt"),e.wc_reset_variation_attr("data-src"),e.wc_reset_variation_attr("data-large_image"),e.wc_reset_variation_attr("data-large_image_width"),e.wc_reset_variation_attr("data-large_image_height"),a.wc_reset_variation_attr("href"),t.find(".yith-quick-view-single-thumb").first().click(),null!==h&&h.goToSlide(0))})};d(document).on("qv_loading",function(){if(!yith_qv.enable_loading)return!1;var i=d(document).find(".yith-quick-view"),t=i.find(".yith-quick-view-overlay");if(i.hasClass("loading")||i.addClass("loading"),!t.find("p").length){var e=d("<p />").text(yith_qv.loading_text);t.append(e)}}),yith_qv.enable_zoom&&void 0!==d.fn.yith_magnifier&&d(document).on("qv_loader_stop qv_variation_gallery_loaded",function(i){if("undefined"==typeof yith_magnifier_options)return!1;var a=d(".yith-quick-view-content .images"),n=a.find(".yith_magnifier_zoom"),o=a.find(".yith_magnifier_zoom img.attachment-quick_view_image_size"),t=a.find(".yith_magnifier_zoom").attr("href"),e=a.find(".yith_magnifier_zoom img").attr("src");a.data("yith_magnifier")&&a.yith_magnifier("destroy"),n.attr("href",t),o.attr("src",e),o.attr("srcset",e),o.attr("src-orig",e);var r={enableSlider:!1,position:"inside",elements:{zoom:n,zoomImage:o}};r=d.extend(!0,{},yith_magnifier_options,r),a.find("a.pp_expand, a.yith_expand").remove(),a.yith_magnifier(r),d(document).off("yith_wcqv_change_thumb").on("yith_wcqv_change_thumb",function(){a.data("yith_magnifier")&&a.yith_magnifier("destroy"),a.yith_magnifier(r)}),d(document).on("found_variation","form.variations_form",function(i,t){var e=!1;if(t.image_src&&t.image_src.length?e=t.image_src:t.image.src&&(e=t.image.src),!e)return!1;n.attr("href",e),o.attr("src",e),o.attr("srcset",e),o.attr("src-orig",e),a.data("yith_magnifier")&&a.yith_magnifier("destroy"),a.yith_magnifier(r)}).on("reset_image",function(i){n.attr("href",t),o.attr("src",e),o.attr("srcset",e),o.attr("src-orig",e),a.data("yith_magnifier")&&a.yith_magnifier("destroy"),a.yith_magnifier(r)})}),d(document).on("qv_loader_stop",function(){"yith-inline"==yith_qv.type&&d("html, body").animate({scrollTop:d(".yith-quick-view").offset().top-100},1e3)}),d.fn.YitdoubleTapToGo=function(){return this.each(function(){var t=!1,e=d(this).closest(".product");d(document).on("qv_loader_stop",function(){e.removeClass("hover_mobile")}),d(this).on("touchstart",function(i){e.siblings().removeClass("hover_mobile"),t&&e.hasClass("hover_mobile")||(i.preventDefault(),e.addClass("hover_mobile"),t=!0)})}),this},yith_qv.ismobile&&d(yith_qv.main_product_link).YitdoubleTapToGo(),d.fn.yith_wcqv_init(),d(document).on("yith_wcqv_wcajaxnav_update post-load",d.fn.yith_wcqv_init),d(window).on("resize",function(){t(),e(d(document).find(".yith-wcqv-button"))}),d(document).on("qv_loader_stop",function(){void 0!==d.fn.tawcvs_variation_swatches_form&&(d(".variations_form").tawcvs_variation_swatches_form(),d(document.body).trigger("tawcvs_initialized"))})}});